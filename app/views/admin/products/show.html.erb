<div class="admin-header">
  <h1 class="admin-title">üì¶ <%= @product.name %></h1>
  <div class="d-flex gap-1">
    <a href="<%= edit_admin_product_path(@product) %>" class="btn btn-primary">‚úèÔ∏è Editar</a>
    <a href="<%= admin_products_path %>" class="btn btn-secondary">‚Üê Volver</a>
  </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; max-width: 1000px;">
  <div class="card">
    <div class="card-image">
      <% if @product.image.attached? %>
        <%= image_tag @product.image, style: "width: 100%; height: 300px; object-fit: cover;" %>
      <% else %>
        üßÄ
      <% end %>
    </div>
    <div class="card-body">
      <p><strong>SKU:</strong> <%= @product.sku %></p>
      <p><strong>Categor√≠a:</strong> <%= @product.category&.name %></p>
      <p><strong>Proveedor:</strong> <%= @product.provider&.name %></p>
      <p><strong>Precio:</strong> S/ <%= number_with_precision(@product.price, precision: 2) %></p>
      <p>
        <strong>Stock:</strong> 
        <span style="color: <%= @product.out_of_stock? ? 'var(--gloria-danger)' : 'var(--gloria-success)' %>; font-weight: bold;">
          <%= @product.stock %> unidades
          <%= '‚ùå AGOTADO' if @product.out_of_stock? %>
        </span>
      </p>
      <p><strong>Perecedero:</strong> <%= @product.is_perishable ? "S√≠" : "No" %></p>
      <% if @product.batch %>
        <p>
          <strong>Lote:</strong> <%= @product.batch.batch_number %>
          <% if @product.batch.expired? %>
            <span style="color: var(--gloria-danger);">‚ö†Ô∏è VENCIDO</span>
          <% else %>
            (vence: <%= @product.batch.expiration_date&.strftime("%d/%m/%Y") %>)
          <% end %>
        </p>
      <% else %>
        <p><strong>Lote:</strong> <em>Sin lote asignado</em></p>
      <% end %>
      <p><strong>Descripci√≥n:</strong></p>
      <p><%= @product.description %></p>
    </div>
  </div>
  
  <div>
    <div class="card">
      <div class="card-body">
        <h3 style="margin: 0 0 1rem 0;">üìä Estado del Producto</h3>
        
        <% if @product.unavailable_for_sale? %>
          <div style="padding: 1rem; background: #fee; border-radius: 8px; margin-bottom: 1rem;">
            <p style="margin: 0; color: var(--gloria-danger); font-weight: bold;">
              <% if @product.batch_expired? %>
                ‚ö†Ô∏è PRODUCTO NO DISPONIBLE - Lote Vencido
              <% else %>
                ‚ùå PRODUCTO AGOTADO - Sin stock
              <% end %>
            </p>
            <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem;">
              Este producto no aparece disponible para compra en la tienda.
            </p>
          </div>
        <% else %>
          <div style="padding: 1rem; background: #efe; border-radius: 8px; margin-bottom: 1rem;">
            <p style="margin: 0; color: var(--gloria-success); font-weight: bold;">
              ‚úì DISPONIBLE PARA VENTA
            </p>
            <p style="margin: 0.5rem 0 0 0; font-size: 0.9rem;">
              <%= @product.stock %> unidades en stock
            </p>
          </div>
        <% end %>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; text-align: center;">
          <div style="padding: 1rem; background: var(--gloria-gray-light); border-radius: 8px;">
            <p style="font-size: 2rem; margin: 0; font-weight: bold;"><%= @product.stock %></p>
            <p style="margin: 0; color: #666; font-size: 0.85rem;">Stock actual</p>
          </div>
          <div style="padding: 1rem; background: var(--gloria-gray-light); border-radius: 8px;">
            <p style="font-size: 2rem; margin: 0; font-weight: bold;">S/ <%= number_with_precision(@product.price, precision: 2) %></p>
            <p style="margin: 0; color: #666; font-size: 0.85rem;">Precio unitario</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
